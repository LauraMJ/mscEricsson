<!DOCTYPE html>
<html>
<head>
<title>Admin Home</title>


<form name="test"><input type="hidden" name="test2"></form>
<form name="bull">Username: <input type="text" name="bear"></form>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
var locate = window.location;
document.test.test2.value = locate;
var text = document.test.test2.value;

function User(username, password, role) {
	this.username = username;
	this.password = password;
	this.role = role;
}

function addNewUser() {
	alert("hello");
	var user = new User($("#username").val(), $("#password").val(), $("#role").val());
	alert($("#username").val());
	alert($("#password").val());
	alert($("#role").val());

	$.ajax({
		type : 'POST',
		contentType : 'application/json',
		url : 'rest/add/user',
        dataType: "json",
		data : JSON.stringify({
			"username":$("#username").val(),
			"password":$("#password").val(),
			"role":$("#role").val()
		}),
		success : handlePost
	});
}

function handlePost() {
	alert("successfully added a new user");
}

function passSelectedIMSI(){
	alert("running function");
	var selected = document.getElementById("selectDropdown");
	var text = selected.options[selected.selectedIndex].innerHTML;
	alert(text);
}

function delineate(str){
	theleft = str.indexOf("=")+1;
	theright = str.length;
	return(str.substring(theleft, theright));
	}
	var zork = delineate(text);
	document.bull.bear.value = zork;

	

//function passFilePath(){
//	var filePathChosen = document.getElementById("filePath").value;
//	alert(filePathChosen);
	//var pathToSend = JSON.parse(filePathChosen);
	//alert(pathToSend);
	//<input value='Import' type='submit'/>\
//	$.ajax({
//		type: 'POST',
//		url: 'rest/testingQueries/import',
//		contentType: 'application/json',
//		data: JSON.stringify(filePathChosen)
//	})
//}	
	
function change(selection){
if(selection=="import"){
	var text = document.getElementById("jsChangeArea");
	text.innerHTML = "";
	//this eeds to be multipart/form-data
						
	text.innerHTML="<form id='importForm' action='rest/testingQueries/import' method='post' enctype='multipart/form-data'>\n\<b>Please choose a file to import</b><br><br>\
						<input id='filePath' type='file' name='datafile' value='' /><br><br>\
						<button type='submit' id='testButton' onclick='passFilePath()'>import</button>\
					</form><hr>";
	
	//should show the amount of imports failed after pressing import button
}

else if(selection=="users"){
	var text = document.getElementById("jsChangeArea");
	text.innerHTML = "";
// 	text.innerHTML="<form enctype='application/json' action='rest/add/user' id='createUserForm' method='post'>\n\<b>Add New User</b><br><br>Type:<select name='role'><option value='admin'>Admin</option><option value='servRep'>Customer Service Representative</option><option value='supEng'>Support Engineer</option><option value='netMGMT'>Network Management Engineer</option></select><br><br>Username:<input name='username' type='text' username='Username'><br><br>Password:<input name='password' type='password' password1='Password'><br><br>Password:<input type='password' password2='Password'><br><br><input id='addUserButton' type='submit' value='Add User'/></form>";
	text.innerHTML="<form method='POST' action='rest/add/user'>\n\<b>Add New User</b><br><br>Username:<input name='username'><br><br>Password:<input name='password' type='password'><br><br>Role:<input name='role'><br><br><input type='submit' value='Add User'/></form>";
	
	//needs to be check to make sure both fields have entered the same password on button click
// 	document.getElementById('usernameField').onkeydown = function(event) {
// 	var key = event.keyCode || event.which;
	
// 	if (key == 32){
// 		if (event.preventDefault) event.preventDefault();
// 		event.returnValue = false;
// 	}
// };
	
}
else if(selection=="custIMSI"){
	var text = document.getElementById("jsChangeArea");
	text.innerHTML = "";
	text.innerHTML="<form id='enterIMSIForm' method='post'>\n\<b>Please Enter IMSI</b><br><br>IMSI:<input type='text' IMSI='imsi'><input id='submitButton' type='submit' value='Submit'/></form><hr>";
	//Needs to display table when button is clicked
}
else if(selection=="suppIMSI"){
	var text = document.getElementById("jsChangeArea");
	text.innerHTML="<form id='timedate' method='post'>\n\<b>Please Select Time Range</b><br><br>From:<input type='date' name='date1'/><input type='time' name='time1'/>To:<input type='date' name='date2'/><input type='time' name='time2'/><br><br><input id='submitButton' type='submit' value='Submit'/></form><hr>";
}
else if(selection=="mgmtIMSI"){
	var text = document.getElementById("jsChangeArea");
	text.innerHTML="<form id='IMSISelect' method='post'>\n\<b>Please Choose IMSI</b><br><br><select id='selectDropdown'><option value='12334556677'>12334556677</option><option value='43694379433'>43694379433</option><option value='26394792711'>26394792711</option></select><b>Please Select Time Range</b><br><br>From:<input type='date' name='date1'/><input type='time' name='time1'/>To:<input type='date' name='date2'/><input type='time' name='time2'/><button id='testButton' onclick='passSelectedIMSI()'>yes</button></form><hr>";
}
else{
	alert("Problemoooo!");
}
}
</script>

<style>
table, th, td {
    border: 1px solid black;
	text-align: left;
	vertical-align: top;
	padding:0;
}

html, body {
	height: 100%;
}
</style>
</head>

<body>
<table style="width:100%; height:98%; border:1px;">
  <tr>
    <th id="header" colspan="3" style="height:100px">header</td>
  </tr>
  <tr>
    <td rowspan="2" style="height:400px; width:140px;">
	<b>Admin:</b><br>
	<a id="importLink" href="#" onclick="change('import');return false;">Import Data</a><br>
	<!--<a id="errorLink" href="#" onclick="change('errors');return false;">Error Log Count</a><br>-->
	<a id="usersLink" href="#" onclick="change('users');return false;">Users</a><br><br>
	
	<b>Customer Service:</b><br>
	<a id="custIMSI" href="#" onclick="change('custIMSI');return false;">IMSI Failures</a><br><br>
	
	<b>Support Eng.:</b><br>
	<a id="suppIMSI" href="#" onclick="change('suppIMSI');return false;">IMSI Failures</a><br><br>
	
	<b>Net. Mgmg Eng.:</b><br>
	<a id="mgmtIMSI" href="#" onclick="change('mgmtIMSI');return false;">IMSI Failures</a><br><br>
	</td>
    <td id="jsChangeArea" >JS changing area</td>
  </tr>
  <tr>
    <td colspan="3" style="height:20px">footer</td>
  </tr>
</table> 





</body>
</html>
